#include <stdio.h>
#include "freertos/FreeRTOS.h"
#include "freertos/task.h"
#include "driver/gpio.h"
#include "driver/adc.h"

#include "esp_bt.h"

#define OUT_PIN GPIO_NUM_2 
#define PIN_13 ADC2_CHANNEL_4
#define freq 1

// toggles the state of the output pin 2 with the defined frequency 

void app_main() {

    adc1_config_width(ADC_WIDTH_BIT_12);
    adc1_config_channel_atten(ADC1_CHANNEL_6,ADC_ATTEN_DB_0);
    uint32_t adc_reading = 0;

    // Configure the GPIO as an output
    gpio_config_t io_conf = {
        .pin_bit_mask = (1ULL << OUT_PIN),
        .mode = GPIO_MODE_OUTPUT,
        .intr_type = GPIO_INTR_DISABLE,
        .pull_up_en = GPIO_PULLUP_DISABLE,
        .pull_down_en = GPIO_PULLDOWN_DISABLE,
    };
    gpio_config(&io_conf);

    while (1) {
        // Toggle the state of the digital pin
        //adc_reading = adc1_get_raw(ADC1_CHANNEL_6);
        //printf("voltage value: %ld \n", adc_reading);
        gpio_set_level(OUT_PIN,1);
        vTaskDelay(pdMS_TO_TICKS(1000/(2*freq))); // Delay for 1 second
        gpio_set_level(OUT_PIN,0);
        vTaskDelay(pdMS_TO_TICKS(1000/(2*freq)));
        }
}
